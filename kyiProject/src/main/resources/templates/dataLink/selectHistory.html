<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{cmmn/body}">
<head>
    <script type="text/javascript" th:src="@{/js/dataLink/selectHistory.js}"></script>
</head>

<div layout:fragment="content">
    <div class="container bg-white p-4 rounded shadow">
        <h2 class="text-center mb-4">스케줄 실행 이력 상세보기</h2>        
        <!-- 브레드크럼 및 버튼 영역 -->
        <div class="d-flex justify-content-end align-items-center mb-4">
            <div>
                <button type="button" class="btn btn-outline-secondary me-2" onclick="history.back()">
                    <i class="bi bi-arrow-left"></i> 뒤로가기
                </button>
                <button type="button" class="btn btn-primary" onclick="fn_apiLink()">
                    <i class="bi bi-arrow-clockwise"></i> API 상세보기
                </button>
            </div>
        </div>

        <!-- 실행 상태 요약 -->
        <div class="mb-3">
		    <h4 class="text-muted mb-0">
		        <i class="bi bi-bar-chart-line"></i> 연계 전체 통계
		    </h4>
		</div>
        <div class="row mb-4 g-3">
            <div class="col-md-3">
                <div class="card h-100 border-success shadow-sm">
                    <div class="card-body text-center">
                        <div class="fs-2 fw-bold text-success" id="processedCount">0</div>
                        <div class="text-muted small">처리된 데이터</div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card h-100 border-warning shadow-sm">
                    <div class="card-body text-center">
                        <div class="fs-2 fw-bold text-warning" id="errorCount">0</div>
                        <div class="text-muted small">오류 건수</div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card h-100 border-info shadow-sm">
                    <div class="card-body text-center">
                        <div class="fs-2 fw-bold text-info" id="executeDuration">0</div>
                        <div class="text-muted small">실행 소요시간(초)</div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card h-100 border-primary shadow-sm">
                    <div class="card-body text-center">
                        <div class="fs-2 fw-bold text-primary" id="successRate">0%</div>
                        <div class="text-muted small">성공률</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 정보 테이블 영역 -->
        <div class="row g-4 mb-4">
            <!-- 기본 정보 -->
            <div class="col-md-6">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-header bg-primary text-white">
                        <i class="bi bi-info-circle"></i> 기본 정보
                    </div>
                    <div class="card-body p-0">
                        <div class="table-responsive">
                            <table class="table table-hover mb-0">
                                <tbody>
                                    <tr>
                                        <th scope="row" class="bg-light text-muted fw-normal">API 설정 ID</th>
                                        <td id="configId">-</td>
                                    </tr>
                                    <tr>
                                        <th scope="row" class="bg-light text-muted fw-normal">API 명</th>
                                        <td id="apiName">-</td>
                                    </tr>
                                    <tr>
                                        <th scope="row" class="bg-light text-muted fw-normal">실행시간</th>
                                        <td id="executeTime">-</td>
                                    </tr>
                                    <tr>
                                        <th scope="row" class="bg-light text-muted fw-normal">실행상태</th>
                                        <td id="status">-</td>
                                    </tr>
                                    <tr>
                                        <th scope="row" class="bg-light text-muted fw-normal">실행메시지</th>
                                        <td id="message">-</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 실행 시간 정보 -->
            <div class="col-md-6">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-header bg-success text-white">
                        <i class="bi bi-stopwatch"></i> 실행 시간 정보
                    </div>
                    <div class="card-body p-0">
                        <div class="table-responsive">
                            <table class="table table-hover mb-0">
                                <tbody>
                                    <tr>
                                        <th scope="row" class="bg-light text-muted fw-normal" style="width: 40%;">실행 시작시간</th>
                                        <td id="executeStartTime">-</td>
                                    </tr>
                                    <tr>
                                        <th scope="row" class="bg-light text-muted fw-normal">실행 종료시간</th>
                                        <td id="executeEndTime">-</td>
                                    </tr>
                                    <tr>
                                        <th scope="row" class="bg-light text-muted fw-normal">실행 소요시간(초)</th>
                                        <td id=executeDurationDetail>-</td>
                                    </tr>
                                    <tr>
                                        <th scope="row" class="bg-light text-muted fw-normal">처리된 데이터 수</th>
                                        <td id="processedCountDetail">-</td>
                                    </tr>
                                    <tr>
                                        <th scope="row" class="bg-light text-muted fw-normal">오류 데이터 수</th>
                                        <td id="errorCountDetail">-</td>
                                    </tr>
                                    <tr>
                                        <th scope="row" class="bg-light text-muted fw-normal">처리 속도</th>
                                        <td id="processingSpeed">-</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</html>